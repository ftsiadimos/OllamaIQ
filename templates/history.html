{% extends "base.html" %}

{% block title %}History - Ollama IQ Test{% endblock %}

{% block page_title %}Run History{% endblock %}
{% block page_subtitle %}Review and export previous benchmark results{% endblock %}

{% block content %}
  <div class="panel">
    <div class="panel-header">
      <h3>Saved Runs</h3>
      <span class="panel-hint">Click a run to view in dashboard with charts or download JSON</span>
    </div>
    {% if db_error %}
      <div class="alert alert-error" role="alert">
        <strong>Database Error</strong>
        <div class="small" style="margin-top:8px">{{ db_error }}</div>
        <div style="margin-top:12px">The database may not be initialized. Try running a benchmark first, or check server logs.</div>
      </div>
    {% elif runs|length == 0 %}
      <div class="alert alert-info" role="status">
        <strong>No runs stored yet.</strong>
        <div class="small" style="margin-top:8px">Run a benchmark from the home page to save results here.</div>
        <div style="margin-top:12px"><a href="/" class="badge">ğŸ  Run a benchmark</a></div>
      </div>
    {% else %}
      <div class="table-responsive">
      <table class="results-table">
        <thead><tr><th>ID</th><th>Host</th><th>Time</th><th>Actions</th></tr></thead>
        <tbody>
          {% for r in runs %}
            <tr>
              <td>{{ r.id }}</td>
              <td>{{ r.host }}</td>
              <td>{{ r.created_at | datetimeformat }}</td>
              <td>
                <a href="/view/{{ r.id }}" class="badge badge-info" title="View in dashboard with charts">ğŸ“Š View in Dashboard</a>
                <a href="/download/{{ r.id }}" class="badge" title="Download raw JSON data">â¬‡ï¸ Download JSON</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      </div>
    {% endif %}
  </div>
{% endblock %}
